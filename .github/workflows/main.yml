name: Direct Gradle Build

on: [workflow_dispatch]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Install and Use Gradle Directly
      run: |
        # براہ راست Gradle سے build کریں (wrapper کی ضرورت نہیں)
        
        # 1. Gradle 8.2 ڈاؤنلوڈ اور انسٹال کریں
        wget https://services.gradle.org/distributions/gradle-8.2-bin.zip
        unzip gradle-8.2-bin.zip
        export GRADLE_HOME=$(pwd)/gradle-8.2
        export PATH="$GRADLE_HOME/bin:$PATH"
        
        # 2. براہ راست Gradle کمانڈز چلائیں
        $GRADLE_HOME/bin/gradle clean
        $GRADLE_HOME/bin/gradle assembleDebug
        
        # APK کی لوکیشن
        echo "APK generated at: app/build/outputs/apk/debug/"
        ls -la app/build/outputs/apk/debug/
    
    - name: Upload APK
      uses: actions/upload-artifact@v4
      with:
        name: direct-build-apk
        path: app/build/outputs/apk/debug/*.apk
